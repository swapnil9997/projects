package com.swr.api.controller;

import java.security.SecureRandom;

import org.springframework.http.MediaType;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.MatrixVariable;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequestMapping("/api/payTMAccount")
public class PayTMAccountApiController {
	
	@GetMapping(value = "/{mobileNo}/balance", produces = {MediaType.TEXT_PLAIN_VALUE})
	public String getAccountBalance(@PathVariable("mobileNo") String mobileNo) {
		return String.valueOf(new SecureRandom().nextInt());
	}
	
	@GetMapping(value = "/{transactionId}/status",produces = {MediaType.TEXT_PLAIN_VALUE})
	public String getTransactionStatus(@PathVariable("transactionId")String transactionId,
			@MatrixVariable("merchantId")String merchantId,
			@RequestParam(name = "amount", required = false) double amount) {
		return "transactionId: " + transactionId + " merchantId: "+merchantId+" amount: " +amount + " status: SUCCESS";
	}
	
}
